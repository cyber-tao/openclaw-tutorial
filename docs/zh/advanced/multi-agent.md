# Multi-Agent 路由

为不同的任务部署专门的 AI 智能体 (Agents)。

## 概览

多智能体路由允许你：
- 为不同类型的任务使用不同的 AI 模型
- 将复杂任务分发给专门的智能体处理
- 生成子代理进行并行工作
- 通过模型选择优化成本

## 智能体架构

```
┌─────────────────────────────────────────┐
│             主智能体 (Main)              │
│       (接收所有输入的初始消息)             │
└─────────────┬───────────────────────────┘
              │
    ┌─────────┼─────────┐
    ▼         ▼         ▼
┌───────┐ ┌───────┐ ┌───────┐
│ 代码  │ │ 调研  │ │ 闲聊  │
│ 智能体│ │ 智能体│ │ 智能体│
└───────┘ └───────┘ └───────┘
```

## 配置方法

### 定义智能体

```json
{
  "agents": {
    "main": {
      "model": "claude-3-5-sonnet",
      "description": "主要助手"
    },
    "coder": {
      "model": "gpt-4-codex",
      "description": "代码生成和审查"
    },
    "research": {
      "model": "gpt-4-turbo",
      "description": "深度调研与分析"
    }
  }
}
```

### 路由规则

```json
{
  "routing": {
    "rules": [
      {
        "pattern": "write.*code|debug|refactor",
        "agent": "coder"
      },
      {
        "pattern": "research|search|analyze",
        "agent": "research"
      }
    ]
  }
}
```

## 子代理生成

为复杂任务动态生成智能体：

```bash
# 生成一个调研代理
openclaw agent spawn --task "调研 AI 发展趋势" --model "gpt-4-turbo"

# 生成一个编程代理
openclaw agent spawn --task "重构此模块" --model "gpt-4-codex"
```

## 使用场景

### 开发工作流
1. 主智能体收到请求
2. 将编程任务路由给 Coder 代理
3. Coder 代理使用专用模型执行
4. 结果返回给主对话线程

### 调研任务
1. 主智能体识别出调研需求
2. 生成带有网页搜索工具的 Research 代理
3. Research 代理汇总发现的内容
4. 主智能体为用户总结最终结果

## 最佳实践

1. **保持主智能体简洁** - 仅用于任务分发和汇总
2. **智能体专业化** - 每个代理只处理一种任务类型
3. **监控成本** - 不同模型的价格差异巨大
4. **测试路由逻辑** - 确保任务能准确分发到对应代理

::: info 了解更多
查看 [Skills 技能系统](/zh/advanced/skills) 来创建自定义智能体行为。
:::
